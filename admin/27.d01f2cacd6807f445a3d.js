(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{JSVl:function(e,t,s){"use strict";s.r(t),s.d(t,"SettlementModule",(function(){return C}));var n=s("ofXK"),i=s("XNiG"),c=s("D0XW"),r=s("7o/Q"),o=s("WMd4");class a{constructor(e,t){this.delay=e,this.scheduler=t}call(e,t){return t.subscribe(new l(e,this.delay,this.scheduler))}}class l extends r.a{constructor(e,t,s){super(e),this.delay=t,this.scheduler=s,this.queue=[],this.active=!1,this.errored=!1}static dispatch(e){const t=e.source,s=t.queue,n=e.scheduler,i=e.destination;for(;s.length>0&&s[0].time-n.now()<=0;)s.shift().notification.observe(i);if(s.length>0){const t=Math.max(0,s[0].time-n.now());this.schedule(e,t)}else this.unsubscribe(),t.active=!1}_schedule(e){this.active=!0,this.destination.add(e.schedule(l.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))}scheduleNotification(e){if(!0===this.errored)return;const t=this.scheduler,s=new h(t.now()+this.delay,e);this.queue.push(s),!1===this.active&&this._schedule(t)}_next(e){this.scheduleNotification(o.a.createNext(e))}_error(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()}_complete(){this.scheduleNotification(o.a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.time=e,this.notification=t}}var d=s("1G5W"),u=s("fXoL"),b=s("AytR"),p=s("tk/3");let g=(()=>{class e{constructor(e){this.http=e,this.baseUrl=b.a.baseUrl}closedGames(e,t){return this.http.get(`${this.baseUrl}/games?date=${e}&sportId=${t}`)}setResult(e,t){return this.http.get(`${this.baseUrl}/result?sportId=${e}&marketId=${t}`)}}return e.\u0275fac=function(t){return new(t||e)(u.bc(p.b))},e.\u0275prov=u.Nb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=s("5eHb"),f=s("3Pt+"),M=s("i2NW"),v=s("ZOsW");function k(e,t){if(1&e&&(u.Xb(0,"ng-option",12),u.Jc(1),u.Wb()),2&e){const e=t.$implicit;u.nc("value",e),u.Fb(1),u.Lc(" ",e.name," ")}}function w(e,t){if(1&e&&(u.Xb(0,"ng-option",12),u.Jc(1),u.Wb()),2&e){const e=t.$implicit;u.nc("value",e),u.Fb(1),u.Mc(" ",e.eventName," > ",e.marketName," ")}}function S(e,t){if(1&e){const e=u.Yb();u.Xb(0,"ul",3),u.Xb(1,"li"),u.Xb(2,"label",13),u.Jc(3," Select Market: "),u.Wb(),u.Xb(4,"ng-select",14),u.ec("change",(function(t){return u.zc(e),u.gc().selectMarket(t)}))("ngModelChange",(function(t){return u.zc(e),u.gc().selectedMarket=t})),u.Xb(5,"ng-option",8),u.Jc(6," Select Market "),u.Wb(),u.Hc(7,w,2,3,"ng-option",9),u.Wb(),u.Wb(),u.Xb(8,"li"),u.Xb(9,"a",10),u.ec("click",(function(){return u.zc(e),u.gc().settleMarket()})),u.Jc(10,"Settle Market"),u.Wb(),u.Wb(),u.Wb()}if(2&e){const e=u.gc();u.Fb(4),u.nc("ngModel",e.selectedMarket),u.Fb(3),u.nc("ngForOf",e.marketList)}}let W=(()=>{class e{constructor(e,t,s){this.settlementService=e,this.datePipe=t,this.toastr=s,this.sportsEventIds=[{name:"Soccer",id:"1"},{name:"Tennis",id:"2"},{name:"Cricket",id:"4"},{name:"Teenpatti/ X-Games",id:"casino"},{name:"Horse Racing",id:"7"},{name:"Greyhound Racing",id:"4339"}],this.selectedSport=this.sportsEventIds[0],this.getListCalls=new i.a,this.dateConfig={format:"YYYY-MM-DD"},this.timeConfig={hours24Format:"hh",showSeconds:!1},this.matchDate=this.datePipe.transform(new Date,"yyyy-MM-dd"),this.matchTime=t.transform((new Date).setHours(0,0,0),"HH:mm:ss")}ngOnInit(){}getGames(){this.getListCalls.next(),this.settlementService.closedGames(""+this.matchDate,this.selectedSport.id).pipe(function(e,t=c.a){var s;const n=(s=e)instanceof Date&&!isNaN(+s)?+e-t.now():Math.abs(e);return e=>e.lift(new a(n,t))}(1500),Object(d.a)(this.getListCalls)).subscribe(e=>{console.log(e),0==e.errorCode?(this.marketList=e.result,this.toastr.success("Success")):this.toastr.error("Something went wrong")})}settleMarket(){this.settlementService.setResult(this.selectedMarket.sportId,this.selectedMarket.marketId).subscribe(e=>{console.log(e),0==e.errorCode?this.toastr.success("Market Settled"):this.toastr.error("Something went wrong")})}selectSport(e){this.selectedSport=e}selectMarket(e){this.selectedMarket=e}}return e.\u0275fac=function(t){return new(t||e)(u.Rb(g),u.Rb(n.e),u.Rb(m.b))},e.\u0275cmp=u.Lb({type:e,selectors:[["app-settlement"]],decls:18,vars:7,consts:[[1,"main_wrap"],[1,"over-wrap"],[1,"function-wrap"],[1,"input-list"],["for","selectDate"],["id","selectDate","type","text","placeholder","YYYY-MM-DD","readonly","true","autocomplete","off",1,"cal-input",3,"ngModel","dpDayPicker","theme","mode","ngModelChange"],["for","selectSport"],["id","selectSport",3,"ngModel","change","ngModelChange"],["value","0","selected",""],[3,"value",4,"ngFor","ngForOf"],["id","getPL",1,"btn-send",3,"click"],["class","input-list",4,"ngIf"],[3,"value"],["for","selectMarket"],["id","selectMarket",3,"ngModel","change","ngModelChange"]],template:function(e,t){1&e&&(u.Xb(0,"div",0),u.Xb(1,"div",1),u.Xb(2,"div",2),u.Xb(3,"ul",3),u.Xb(4,"li"),u.Xb(5,"label",4),u.Jc(6," Date of the Events "),u.Wb(),u.Xb(7,"input",5),u.ec("ngModelChange",(function(e){return t.matchDate=e})),u.Wb(),u.Xb(8,"label",6),u.Jc(9," Select Sport: "),u.Wb(),u.Xb(10,"ng-select",7),u.ec("change",(function(e){return t.selectSport(e)}))("ngModelChange",(function(e){return t.selectedSport=e})),u.Xb(11,"ng-option",8),u.Jc(12," Select Event "),u.Wb(),u.Hc(13,k,2,2,"ng-option",9),u.Wb(),u.Wb(),u.Xb(14,"li"),u.Xb(15,"a",10),u.ec("click",(function(){return t.getGames()})),u.Jc(16,"Get History"),u.Wb(),u.Wb(),u.Wb(),u.Hc(17,S,11,2,"ul",11),u.Wb(),u.Wb(),u.Wb()),2&e&&(u.Fb(7),u.nc("ngModel",t.matchDate)("dpDayPicker",t.dateConfig)("theme","dp-material")("mode","day"),u.Fb(3),u.nc("ngModel",t.selectedSport),u.Fb(3),u.nc("ngForOf",t.sportsEventIds),u.Fb(4),u.nc("ngIf",t.marketList&&t.marketList.length))},directives:[f.b,f.p,f.r,M.a,v.a,v.c,n.l,n.m],styles:[""]}),e})();var X=s("tyNb");const y=[{path:"",component:W}];let C=(()=>{class e{}return e.\u0275mod=u.Pb({type:e}),e.\u0275inj=u.Ob({factory:function(t){return new(t||e)},providers:[n.e],imports:[[n.c,M.b,v.b,f.j,X.f.forChild(y)],X.f]}),e})()}}]);